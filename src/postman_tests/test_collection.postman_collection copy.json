{
	"info": {
		"_postman_id": "tictactoe-stats-tests",
		"name": "TicTacToe Stats API Tests",
		"description": "–¢–µ—Å—Ç—ã –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏, –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä –∏ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "üìù 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",
			"item": [
				{
					"name": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testplayer1\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/signup",
							"host": ["{{base_url}}"],
							"path": ["auth", "signup"]
						}
					},
					"response": []
				},
				{
					"name": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testplayer2\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/signup",
							"host": ["{{base_url}}"],
							"path": ["auth", "signup"]
						}
					},
					"response": []
				},
				{
					"name": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has access token\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.accessToken).to.exist;",
									"    pm.expect(jsonData.refreshToken).to.exist;",
									"    pm.collectionVariables.set(\"access_token_user1\", jsonData.accessToken);",
									"    pm.collectionVariables.set(\"user1_id\", \"\"); // –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ –∏–∑ —Ç–æ–∫–µ–Ω–∞",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testplayer1\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						}
					},
					"response": []
				},
				{
					"name": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has tokens\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.accessToken).to.exist;",
									"    pm.expect(jsonData.refreshToken).to.exist;",
									"    pm.collectionVariables.set(\"access_token_user2\", jsonData.accessToken);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"testplayer2\",\n    \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üéÆ 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏–≥—Ä",
			"item": [
				{
					"name": "–°–æ–∑–¥–∞–Ω–∏–µ –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω–æ–π –∏–≥—Ä—ã (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 1)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Game created successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.gameId).to.exist;",
									"    pm.expect(jsonData.status).to.equal(\"WAITING_FOR_PLAYERS\");",
									"    pm.expect(jsonData.againstComputer).to.be.false;",
									"    pm.collectionVariables.set(\"multiplayer_game_id\", jsonData.gameId);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/game/new?opponent=human",
							"host": ["{{base_url}}"],
							"path": ["game", "new"],
							"query": [
								{
									"key": "opponent",
									"value": "human"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∏–≥—Ä–µ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Game joined successfully\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.gameId).to.exist;",
									"    pm.expect(jsonData.status).to.equal(\"PLAYER_X_TURN\");",
									"    pm.expect(jsonData.playerSymbol).to.equal(\"O\");",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user2}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/game/{{multiplayer_game_id}}/join",
							"host": ["{{base_url}}"],
							"path": ["game", "{{multiplayer_game_id}}", "join"]
						}
					},
					"response": []
				},
				{
					"name": "–°—ã–≥—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ö–æ–¥–æ–≤ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã",
					"item": [
						{
							"name": "–•–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1 (X) –≤ —Ü–µ–Ω—Ç—Ä",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user1}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"board\": [[0,0,0],[0,1,0],[0,0,0]]\n}"
								},
								"url": {
									"raw": "{{base_url}}/game/{{multiplayer_game_id}}",
									"host": ["{{base_url}}"],
									"path": ["game", "{{multiplayer_game_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "–•–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2 (O) –≤ –ª–µ–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user2}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"board\": [[2,0,0],[0,1,0],[0,0,0]]\n}"
								},
								"url": {
									"raw": "{{base_url}}/game/{{multiplayer_game_id}}",
									"host": ["{{base_url}}"],
									"path": ["game", "{{multiplayer_game_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "–•–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1 (X) –≤ –ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª - –ü–æ–±–µ–¥–∞!",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user1}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"board\": [[2,0,1],[0,1,0],[0,0,0]]\n}"
								},
								"url": {
									"raw": "{{base_url}}/game/{{multiplayer_game_id}}",
									"host": ["{{base_url}}"],
									"path": ["game", "{{multiplayer_game_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "–•–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2 (O) –≤ –ª–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user2}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"board\": [[2,0,1],[0,1,0],[2,0,0]]\n}"
								},
								"url": {
									"raw": "{{base_url}}/game/{{multiplayer_game_id}}",
									"host": ["{{base_url}}"],
									"path": ["game", "{{multiplayer_game_id}}"]
								}
							},
							"response": []
						},
						{
							"name": "–•–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1 (X) –≤ –ª–µ–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"Game completed - X won\", function () {",
											"    var jsonData = pm.response.json();",
											"    pm.expect(jsonData.gameId).to.exist;",
											"    pm.expect(jsonData.status).to.equal(\"PLAYER_X_WON\");",
											"    pm.collectionVariables.set(\"completed_game_id\", jsonData.gameId);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user1}}"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"board\": [[2,0,1],[0,1,0],[2,0,1]]\n}"
								},
								"url": {
									"raw": "{{base_url}}/game/{{multiplayer_game_id}}",
									"host": ["{{base_url}}"],
									"path": ["game", "{{multiplayer_game_id}}"]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "üìä 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
			"item": [
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user1)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has user stats\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.userId).to.exist;",
									"    pm.expect(jsonData.username).to.equal(\"testplayer1\");",
									"    pm.expect(jsonData.gamesPlayed).to.be.a('number');",
									"    pm.expect(jsonData.wins).to.be.a('number');",
									"    pm.expect(jsonData.winRate).to.be.a('number');",
									"    pm.collectionVariables.set(\"user1_wins\", jsonData.wins);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/stats/me",
							"host": ["{{base_url}}"],
							"path": ["stats", "me"]
						}
					},
					"response": []
				},
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (user2)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has user stats\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.userId).to.exist;",
									"    pm.expect(jsonData.username).to.equal(\"testplayer2\");",
									"    pm.expect(jsonData.gamesPlayed).to.equal(1);",
									"    pm.expect(jsonData.wins).to.equal(0);",
									"    pm.expect(jsonData.winRate).to.equal(0);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user2}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/stats/me",
							"host": ["{{base_url}}"],
							"path": ["stats", "me"]
						}
					},
					"response": []
				},
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ 1 —á–µ—Ä–µ–∑ /user/{id}",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response has user info with stats\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.id).to.exist;",
									"    pm.expect(jsonData.username).to.equal(\"testplayer1\");",
									"    pm.expect(jsonData.gamesPlayed).to.be.a('number');",
									"    pm.expect(jsonData.wins).to.be.a('number');",
									"    pm.expect(jsonData.winRate).to.be.a('number');",
									"    pm.expect(jsonData.leaderboardPosition).to.be.a('number');",
									"    pm.collectionVariables.set(\"user1_id\", jsonData.id);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/user/{{user1_id}}",
							"host": ["{{base_url}}"],
							"path": ["user", "{{user1_id}}"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üìú 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä",
			"item": [
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response is array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"    pm.expect(jsonData.length).to.be.at.least(1);",
									"});",
									"",
									"pm.test(\"Game history has correct structure\", function () {",
									"    var games = pm.response.json();",
									"    var firstGame = games[0];",
									"    pm.expect(firstGame.gameId).to.exist;",
									"    pm.expect(firstGame.finalBoard).to.be.an('array');",
									"    pm.expect(firstGame.result).to.be.oneOf(['WIN', 'LOSS', 'DRAW']);",
									"    pm.expect(firstGame.opponentUsername).to.equal('testplayer2');",
									"    pm.expect(firstGame.gameDate).to.exist;",
									"    pm.expect(firstGame.result).to.equal('WIN');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/stats/history",
							"host": ["{{base_url}}"],
							"path": ["stats", "history"]
						}
					},
					"response": []
				},
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"User 2 has lost game in history\", function () {",
									"    var games = pm.response.json();",
									"    pm.expect(games).to.be.an('array');",
									"    pm.expect(games.length).to.be.at.least(1);",
									"    var firstGame = games[0];",
									"    pm.expect(firstGame.result).to.equal('LOSS');",
									"    pm.expect(firstGame.opponentUsername).to.equal('testplayer1');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user2}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/stats/history",
							"host": ["{{base_url}}"],
							"path": ["stats", "history"]
						}
					},
					"response": []
				},
				{
					"name": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–≥—Ä—ã —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é",
					"item": [
						{
							"name": "–°–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user1}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/game/new?opponent=computer",
									"host": ["{{base_url}}"],
									"path": ["game", "new"],
									"query": [
										{
											"key": "opponent",
											"value": "computer"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–≥—Ä–∞ —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º –Ω–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Computer games not in history\", function () {",
											"    var games = pm.response.json();",
											"    // –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∏–≥—Ä–∞ (—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º 2)",
											"    pm.expect(games.length).to.equal(1);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user1}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/stats/history",
									"host": ["{{base_url}}"],
									"path": ["stats", "history"]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "üèÜ 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤",
			"item": [
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10 –∑–∞–ø–∏—Å–µ–π)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Leaderboard is array\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData).to.be.an('array');",
									"    pm.expect(jsonData.length).to.be.at.least(1);",
									"});",
									"",
									"pm.test(\"Leaderboard entries have correct structure\", function () {",
									"    var leaderboard = pm.response.json();",
									"    var firstEntry = leaderboard[0];",
									"    pm.expect(firstEntry.userId).to.exist;",
									"    pm.expect(firstEntry.username).to.exist;",
									"    pm.expect(firstEntry.gamesPlayed).to.be.a('number');",
									"    pm.expect(firstEntry.wins).to.be.a('number');",
									"    pm.expect(firstEntry.winRate).to.be.a('number');",
									"    pm.expect(firstEntry.winRate).to.be.within(0, 100);",
									"});",
									"",
									"pm.test(\"User 1 should be first (has win)\", function () {",
									"    var leaderboard = pm.response.json();",
									"    var firstEntry = leaderboard[0];",
									"    pm.expect(firstEntry.username).to.equal('testplayer1');",
									"    pm.expect(firstEntry.wins).to.equal(1);",
									"    pm.expect(firstEntry.winRate).to.equal(100);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/stats/leaderboard",
							"host": ["{{base_url}}"],
							"path": ["stats", "leaderboard"]
						}
					},
					"response": []
				},
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ —Å limit=5",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Limit parameter works\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.at.most(5);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/stats/leaderboard?limit=5",
							"host": ["{{base_url}}"],
							"path": ["stats", "leaderboard"],
							"query": [
								{
									"key": "limit",
									"value": "5"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ –ª–∏–¥–µ—Ä–æ–≤",
					"item": [
						{
							"name": "–ü–æ–∑–∏—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"User 1 should be at position 1\", function () {",
											"    var position = pm.response.json();",
											"    pm.expect(position).to.equal(1);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user1}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/stats/leaderboard/position",
									"host": ["{{base_url}}"],
									"path": ["stats", "leaderboard", "position"]
								}
							},
							"response": []
						},
						{
							"name": "–ü–æ–∑–∏—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Status code is 200\", function () {",
											"    pm.response.to.have.status(200);",
											"});",
											"",
											"pm.test(\"User 2 should be at position 2\", function () {",
											"    var position = pm.response.json();",
											"    pm.expect(position).to.equal(2);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user2}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/stats/leaderboard/position",
									"host": ["{{base_url}}"],
									"path": ["stats", "leaderboard", "position"]
								}
							},
							"response": []
						}
					]
				}
			]
		},
		{
			"name": "üß™ 6. Edge Cases –∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã",
			"item": [
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 401\", function () {",
									"    pm.response.to.have.status(401);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/stats/history",
							"host": ["{{base_url}}"],
							"path": ["stats", "history"]
						}
					},
					"response": []
				},
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ª–∏–¥–µ—Ä–æ–≤ —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º limit",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 200 even with invalid limit\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Default limit used when invalid\", function () {",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.length).to.be.at.most(10);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/stats/leaderboard?limit=-1",
							"host": ["{{base_url}}"],
							"path": ["stats", "leaderboard"],
							"query": [
								{
									"key": "limit",
									"value": "-1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status code is 404\", function () {",
									"    pm.response.to.have.status(404);",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token_user1}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/user/00000000-0000-0000-0000-000000000000",
							"host": ["{{base_url}}"],
							"path": ["user", "00000000-0000-0000-0000-000000000000"]
						}
					},
					"response": []
				},
				{
					"name": "–°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–≥—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏",
					"item": [
						{
							"name": "–°–æ–∑–¥–∞—Ç—å –µ—â–µ –æ–¥–Ω—É –º—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä–Ω—É—é –∏–≥—Ä—É",
							"request": {
								"method": "POST",
								"header": [
										{
											"key": "Content-Type",
											"value": "application/json"
										},
										{
											"key": "Authorization",
											"value": "Bearer {{access_token_user1}}"
										}
								],
								"url": {
									"raw": "{{base_url}}/game/new?opponent=human",
									"host": ["{{base_url}}"],
									"path": ["game", "new"],
									"query": [
										{
											"key": "opponent",
											"value": "human"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 2",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									},
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user2}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/game/{{multiplayer_game_id}}/join",
									"host": ["{{base_url}}"],
									"path": ["game", "{{multiplayer_game_id}}", "join"]
								}
							},
							"response": []
						},
						{
							"name": "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"pm.test(\"Statistics updated correctly\", function () {",
											"    var jsonData = pm.response.json();",
											"    // gamesPlayed –¥–æ–ª–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å—Å—è –Ω–∞ 1",
											"    var expectedGames = parseInt(pm.collectionVariables.get(\"user1_wins\")) + 1;",
											"    pm.expect(jsonData.wins).to.equal(expectedGames);",
											"    pm.expect(jsonData.winRate).to.equal(100);",
											"});"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token_user1}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/stats/me",
									"host": ["{{base_url}}"],
									"path": ["stats", "me"]
								}
							},
							"response": []
						}
					]
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"console.log('Starting TicTacToe Stats API Tests');"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"console.log('Test completed: ' + pm.info.requestName);"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080"
		},
		{
			"key": "access_token_user1",
			"value": ""
		},
		{
			"key": "access_token_user2",
			"value": ""
		},
		{
			"key": "multiplayer_game_id",
			"value": ""
		},
		{
			"key": "completed_game_id",
			"value": ""
		},
		{
			"key": "user1_id",
			"value": ""
		},
		{
			"key": "user1_wins",
			"value": "0"
		}
	],
	"auth": null
}
